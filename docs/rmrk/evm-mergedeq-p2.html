<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rmrk/evm-mergedeq-p2">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">EVM, merged equippable p2 | Pretrain</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pretrain.io/docs/rmrk/evm-mergedeq-p2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="EVM, merged equippable p2 | Pretrain"><meta data-rh="true" name="description" content="Deploy Script"><meta data-rh="true" property="og:description" content="Deploy Script"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://pretrain.io/docs/rmrk/evm-mergedeq-p2"><link data-rh="true" rel="alternate" href="https://pretrain.io/docs/rmrk/evm-mergedeq-p2" hreflang="en"><link data-rh="true" rel="alternate" href="https://pretrain.io/docs/rmrk/evm-mergedeq-p2" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pretrain RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pretrain Atom Feed"><link rel="stylesheet" href="/assets/css/styles.51fb7f1b.css">
<link rel="preload" href="/assets/js/runtime~main.4f41ccfc.js" as="script">
<link rel="preload" href="/assets/js/main.9de5c111.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Pretrain logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Pretrain logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Pretrain</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/swader/pretrain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/rmrk-booklet">RMRK Booklet</a><button aria-label="Toggle the collapsible sidebar category &#x27;RMRK Booklet&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/introduction">Introduction and Legacy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/lego1">RMRK Legos, part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/lego2">RMRK Legos, part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/lego3">RMRK Legos, part 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/concepts1">Concepts, part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/concepts2">Concepts, part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases1">Use Cases, cross-game assets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases2">Use Cases, ticketing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases3">Use Cases, revealable NFTs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases4">Use Cases, metadata backup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases5">Use Cases, part 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases6">Use Cases, part 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/usecases7">Use Cases, part 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm1">EVM, part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-ma-1">EVM, multi-asset part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-ma-2">EVM, multi-asset part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-nestable-p1">EVM, nestable part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-nestable-p2">EVM, nestable part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-nma-p1">EVM, nestable and multi asset, part 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-nma-p2">EVM, nestable and multi asset, part 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-mergedeq-p1">EVM, merged equippable p1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/rmrk/evm-mergedeq-p2">EVM, merged equippable p2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/rmrk/evm-mergedeq-p3">EVM, merged equippable p3</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/rmrk-booklet"><span itemprop="name">RMRK Booklet</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">EVM, merged equippable p2</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>EVM, merged equippable p2</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-script">Deploy Script<a class="hash-link" href="#deploy-script" title="Direct link to heading">​</a></h2><p>The deploy script for simple MergedEquippable resides in the <code>deployEquippable.ts</code>.</p><p>The deploy script uses the ethers, <code>SimpleCatalog</code>, <code>SimpleEquippable</code>, <code>RMRKEquipRenderUtils</code> and <code>ContractTransaction</code> imports. We will also define the <code>pricePerMint</code> constant, which will be used to set the minting price of the tokens. The empty deploy script should look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { ethers } from &quot;hardhat&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SimpleCatalog,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RMRKEquipRenderUtils,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} from &quot;../typechain-types&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ContractTransaction } from &quot;ethers&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pricePerMint = ethers.utils.parseEther(&quot;0.0001&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main().catch((error) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.error(error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  process.exitCode = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Since we will expand upon this deploy script in the <a href="https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md" target="_blank" rel="noopener noreferrer">user journey</a>, we will add a deployContracts function. In it we will deploy two <code>SimpleEquippable</code> smart contracts, one <code>SimpleCatalog</code> smart contract and a <code>RMRKEquipRenderUtils</code> smart contract. Once the smart contracts are deployed, we will output their addresses. The function is defined below the <code>main</code> function definition:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async function deployContracts(): Promise&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [SimpleEquippable, SimpleEquippable, SimpleCatalog, RMRKEquipRenderUtils]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Deploying smart contracts&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [beneficiary] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const contractFactory = await ethers.getContractFactory(&quot;SimpleEquippable&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const catalogFactory = await ethers.getContractFactory(&quot;SimpleCatalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const viewsFactory = await ethers.getContractFactory(&quot;RMRKEquipRenderUtils&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const kanaria: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Kanaria&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KAN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxSupply: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const gem: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Gem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;GM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxSupply: 3000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const catalog: SimpleCatalog = await catalogFactory.deploy(&quot;KB&quot;, &quot;svg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const views: RMRKEquipRenderUtils = await viewsFactory.deploy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await kanaria.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await gem.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await catalog.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await views.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `Sample contracts deployed to ${kanaria.address} (Kanaria), ${gem.address} (Gem) and ${catalog.address} (Catalog)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return [kanaria, gem, catalog, views];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In order for the <code>deployContracts</code> to be called when running the deploy script, we have to add it to the main function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  const [kanaria, gem, catalog, views] = await deployContracts();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A custom script added to <code>package.json</code> allows us to easily run the script:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;deploy-equippable&quot;: &quot;hardhat run scripts/deployEquippable.ts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We use the script with <code>npm run deploy-equippable</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-journey">User Journey<a class="hash-link" href="#user-journey" title="Direct link to heading">​</a></h2><p>With the deploy script ready, we can examine how the journey of a user using merged equippable would look like.</p><p>The base of the user journey script is the same as the deploy script, as we need to deploy the smart contract in order to interact with it:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import { ethers } from &quot;hardhat&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SimpleCatalog,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RMRKEquipRenderUtils,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} from &quot;../typechain-types&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ContractTransaction } from &quot;ethers&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pricePerMint = ethers.utils.parseEther(&quot;0.0001&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [kanaria, gem, catalog, views] = await deployContracts();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function deployContracts(): Promise&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [SimpleEquippable, SimpleEquippable, SimpleCatalog, RMRKEquipRenderUtils]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Deploying smart contracts&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [beneficiary] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const contractFactory = await ethers.getContractFactory(&quot;SimpleEquippable&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const catalogFactory = await ethers.getContractFactory(&quot;SimpleCatalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const viewsFactory = await ethers.getContractFactory(&quot;RMRKEquipRenderUtils&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const kanaria: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Kanaria&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KAN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxSupply: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const gem: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Gem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;GM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      maxSupply: 3000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const catalog: SimpleCatalog = await catalogFactory.deploy(&quot;KB&quot;, &quot;svg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const views: RMRKEquipRenderUtils = await viewsFactory.deploy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await kanaria.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await gem.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await catalog.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `Sample contracts deployed to ${kanaria.address} (Kanaria), ${gem.address} (Gem) and ${catalog.address} (Catalog)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return [kanaria, gem, catalog, views];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main().catch((error) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.error(error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  process.exitCode = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the smart contracts are deployed, we can setup the Catalog. </p><p>We will set it up have two fixed part options for background, head, body and wings. Additionally we will add three slot options for gems. All of these will be added using the <a href="https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md" target="_blank" rel="noopener noreferrer"><code>addPartList</code></a> method. The call together with encapsulating <code>setupCatalog</code> function should look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async function setupCatalog(catalog: SimpleCatalog, gemAddress: string): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Setting up Catalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Setup catalog with 2 fixed part options for background, head, body and wings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Also 3 slot options for gems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const tx = await catalog.addPartList([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Background option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://backgrounds/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Background option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://backgrounds/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Head option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://heads/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Head option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://heads/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Body option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://body/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Body option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 6,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://body/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Wings option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 7,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://wings/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Wings option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://wings/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Gems slot 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Gems slot 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // Gems slot 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      partId: 11,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Catalog is set&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOTE: The <code>metadataURI</code> of a slot can be used to retrieve a fallback asset when no asset is equipped into it.</p><p>Notice how the <code>z</code> value of the background is <code>0</code> and that of the head is <code>3</code>. Also note how the <code>itemType</code> value of the <code>Slot</code> type of fixed items is <code>2</code> and that of equippable items is <code>1</code>. Additionally the <code>metadataURI</code> is usually left blank for the equippables, but has to be set for the fixed items. The <code>equippable</code> values have to be set to the gem smart contracts for the equippable items.</p><p>In order for the <code>setupCatalog</code> to be called, we have to add it to the main function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  await setupCatalog(catalog, gem.address);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the <code>Catalog</code> set up, the tokens should now be minted. Both <code>Kanaria</code> and <code>Gem</code> tokens will be minted in the <code>mintTokens</code>. To define how many tokens should be minted, <code>totalBirds</code> constant will be added below the import statements:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const totalBirds = 5;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>mintToken</code> function should accept two arguments (<code>Kanaria</code> and <code>Gem</code>). We will prepare a batch of transactions to mint the tokens and send them. Once the tokens are minted, we will output the total number of tokens minted. While the Kanaria tokens will be minted to the <code>tokenOwner</code> address, the Gem tokens will be minted using the <a href="https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md" target="_blank" rel="noopener noreferrer"><code>nestMint</code></a> method in order to be minted directly to the Kanaria tokens. We will mint three Gem tokens to each Kanaria. Since all of the nested tokens need to be approved, we will also build a batch of transaction to accept a single nest-minted <code>Gem</code> for each <code>Kanaria</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async function mintTokens(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kanaria: SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gem: SimpleEquippable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Minting tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [ , tokenOwner] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Mint some kanarias</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Minting Kanaria tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let tx = await kanaria.mint(tokenOwner.address, totalBirds, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: pricePerMint.mul(totalBirds),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(`Minted ${totalBirds} kanarias`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Mint 3 gems into each kanaria</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Nest-minting Gem tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let allTx: ContractTransaction[] = [];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for (let i = 1; i &lt;= totalBirds; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let tx = await gem.nestMint(kanaria.address, 3, i, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      value: pricePerMint.mul(3),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(`Minted 3 gems into each kanaria`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Accept 3 gems for each kanaria</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Accepting Gems&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for (let tokenId = 1; tokenId &lt;= totalBirds; tokenId++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allTx = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      await kanaria.connect(tokenOwner).acceptChild(tokenId, 2, gem.address, 3 * tokenId),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      await kanaria.connect(tokenOwner).acceptChild(tokenId, 1, gem.address, 3 * tokenId - 1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      await kanaria.connect(tokenOwner).acceptChild(tokenId, 0, gem.address, 3 * tokenId - 2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(`Accepted gems for each kanaria`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOTE: We assign the <code>tokenOwner</code> the second available signer, so that the assets are not automatically accepted when added to the token. This happens when an account adding an asset to a token is also the owner of said token.</p><p>In order for the <code>mintTokens</code> to be called, we have to add it to the main function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  await mintTokens(kanaria, gem);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Having minted both <code>Kanarias</code> and <code>Gems</code>, we can now add assets to them. We will add assets to the Kanaria using the <code>addKanariaAssets</code> function. It accepts <code>Kanaria</code> and address of the <code>Catalog</code> smart contract. Assets will be added using the <a href="https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md" target="_blank" rel="noopener noreferrer"><code>addEquippableAssetEntry</code></a> method. We will add a default asset, which doesn&#x27;t need a <code>baseAddress</code> value. The composed asset needs to have the baseAddress. We also specify the fixed parts IDs for background, head, body and wings. Additionally we allow the gems to be equipped in the slot parts IDs. With the asset entires added, we can add them to a token and then accept them as well:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async function addKanariaAssets(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  kanaria: SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseAddress: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Adding Kanaria assets&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const [ , tokenOwner] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const assetDefaultId = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const assetComposedId = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let allTx: ContractTransaction[] = [];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  let tx = await kanaria.addEquippableAssetEntry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0, // Only used for assets meant to equip into others</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ethers.constants.AddressZero, // catalog is not needed here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://default.png&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tx = await kanaria.addEquippableAssetEntry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0, // Only used for assets meant to equip into others</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catalogAddress, // Since we&#x27;re using parts, we must define the catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://meta1.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1, 3, 5, 7, 9, 10, 11] // We&#x27;re using first background, head, body and wings and state that this can receive the 3 slot parts for gems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Wait for both assets to be added</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Added 2 asset entries&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Add assets to token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const tokenId = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allTx = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.addAssetToToken(tokenId, assetDefaultId, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.addAssetToToken(tokenId, assetComposedId, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Added assets to token 1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // Accept both assets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tx = await kanaria.connect(tokenOwner).acceptAsset(tokenId, 0, assetDefaultId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tx = await kanaria.connect(tokenOwner).acceptAsset(tokenId, 0, assetComposedId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(&quot;Assets accepted&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="training-data">Training Data<a class="hash-link" href="#training-data" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">## Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The deploy script for simple MergedEquippable resides in the `deployEquippable.ts`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The deploy script uses the ethers, `SimpleCatalog`, `SimpleEquippable`, `RMRKEquipRenderUtils` and `ContractTransaction` imports. We will also define the `pricePerMint` constant, which will be used to set the minting price of the tokens. The empty deploy script should look like this:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ethers } from &quot;hardhat&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleCatalog,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RMRKEquipRenderUtils,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} from &quot;../typechain-types&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ContractTransaction } from &quot;ethers&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pricePerMint = ethers.utils.parseEther(&quot;0.0001&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main().catch((error) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.error(error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process.exitCode = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Since we will expand upon this deploy script in the [user journey](https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md), we will add a deployContracts function. In it we will deploy two `SimpleEquippable` smart contracts, one `SimpleCatalog` smart contract and a `RMRKEquipRenderUtils` smart contract. Once the smart contracts are deployed, we will output their addresses. The function is defined below the `main` function definition:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function deployContracts(): Promise&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[SimpleEquippable, SimpleEquippable, SimpleCatalog, RMRKEquipRenderUtils]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Deploying smart contracts&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [beneficiary] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const contractFactory = await ethers.getContractFactory(&quot;SimpleEquippable&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const catalogFactory = await ethers.getContractFactory(&quot;SimpleCatalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const viewsFactory = await ethers.getContractFactory(&quot;RMRKEquipRenderUtils&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const kanaria: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Kanaria&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KAN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxSupply: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const gem: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Gem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;GM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxSupply: 3000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const catalog: SimpleCatalog = await catalogFactory.deploy(&quot;KB&quot;, &quot;svg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const views: RMRKEquipRenderUtils = await viewsFactory.deploy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await kanaria.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await gem.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await catalog.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await views.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `Sample contracts deployed to ${kanaria.address} (Kanaria), ${gem.address} (Gem) and ${catalog.address} (Catalog)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return [kanaria, gem, catalog, views];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In order for the `deployContracts` to be called when running the deploy script, we have to add it to the main function:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [kanaria, gem, catalog, views] = await deployContracts();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A custom script added to `package.json` allows us to easily run the script:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;scripts&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;deploy-equippable&quot;: &quot;hardhat run scripts/deployEquippable.ts&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We use the script with `npm run deploy-equippable`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## User Journey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">With the deploy script ready, we can examine how the journey of a user using merged equippable would look like.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The base of the user journey script is the same as the deploy script, as we need to deploy the smart contract in order to interact with it:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ethers } from &quot;hardhat&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleCatalog,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RMRKEquipRenderUtils,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} from &quot;../typechain-types&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import { ContractTransaction } from &quot;ethers&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const pricePerMint = ethers.utils.parseEther(&quot;0.0001&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [kanaria, gem, catalog, views] = await deployContracts();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function deployContracts(): Promise&lt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[SimpleEquippable, SimpleEquippable, SimpleCatalog, RMRKEquipRenderUtils]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Deploying smart contracts&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [beneficiary] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const contractFactory = await ethers.getContractFactory(&quot;SimpleEquippable&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const catalogFactory = await ethers.getContractFactory(&quot;SimpleCatalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const viewsFactory = await ethers.getContractFactory(&quot;RMRKEquipRenderUtils&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const kanaria: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Kanaria&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;KAN&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxSupply: 1000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const gem: SimpleEquippable = await contractFactory.deploy(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Gem&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;GM&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://collectionMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://tokenMeta&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    erc20TokenAddress: ethers.constants.AddressZero,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tokenUriIsEnumerable: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyRecipient: await beneficiary.getAddress(),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    royaltyPercentageBps: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxSupply: 3000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pricePerMint: pricePerMint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const catalog: SimpleCatalog = await catalogFactory.deploy(&quot;KB&quot;, &quot;svg&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const views: RMRKEquipRenderUtils = await viewsFactory.deploy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await kanaria.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await gem.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await catalog.deployed();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `Sample contracts deployed to ${kanaria.address} (Kanaria), ${gem.address} (Gem) and ${catalog.address} (Catalog)`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return [kanaria, gem, catalog, views];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">main().catch((error) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.error(error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">process.exitCode = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Once the smart contracts are deployed, we can setup the Catalog. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">We will set it up have two fixed part options for background, head, body and wings. Additionally we will add three slot options for gems. All of these will be added using the [`addPartList`](https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md) method. The call together with encapsulating `setupCatalog` function should look like this:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function setupCatalog(catalog: SimpleCatalog, gemAddress: string): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Setting up Catalog&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Setup catalog with 2 fixed part options for background, head, body and wings.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Also 3 slot options for gems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const tx = await catalog.addPartList([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Background option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://backgrounds/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Background option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://backgrounds/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Head option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://heads/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Head option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://heads/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Body option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://body/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Body option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 6,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://body/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Wings option 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 7,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://wings/1.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Wings option 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 8,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 2, // Fixed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;ipfs://wings/2.svg&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Gems slot 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 9,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Gems slot 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Gems slot 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partId: 11,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    part: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        itemType: 1, // Slot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z: 4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        equippable: [gemAddress], // Only gems tokens can be equipped here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadataURI: &quot;&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Catalog is set&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTE: The `metadataURI` of a slot can be used to retrieve a fallback asset when no asset is equipped into it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Notice how the `z` value of the background is `0` and that of the head is `3`. Also note how the `itemType` value of the `Slot` type of fixed items is `2` and that of equippable items is `1`. Additionally the `metadataURI` is usually left blank for the equippables, but has to be set for the fixed items. The `equippable` values have to be set to the gem smart contracts for the equippable items.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In order for the `setupCatalog` to be called, we have to add it to the main function:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await setupCatalog(catalog, gem.address);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">With the `Catalog` set up, the tokens should now be minted. Both `Kanaria` and `Gem` tokens will be minted in the `mintTokens`. To define how many tokens should be minted, `totalBirds` constant will be added below the import statements:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const totalBirds = 5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The `mintToken` function should accept two arguments (`Kanaria` and `Gem`). We will prepare a batch of transactions to mint the tokens and send them. Once the tokens are minted, we will output the total number of tokens minted. While the Kanaria tokens will be minted to the `tokenOwner` address, the Gem tokens will be minted using the [`nestMint`](https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md) method in order to be minted directly to the Kanaria tokens. We will mint three Gem tokens to each Kanaria. Since all of the nested tokens need to be approved, we will also build a batch of transaction to accept a single nest-minted `Gem` for each `Kanaria`:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function mintTokens(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kanaria: SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gem: SimpleEquippable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Minting tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [ , tokenOwner] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Mint some kanarias</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Minting Kanaria tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let tx = await kanaria.mint(tokenOwner.address, totalBirds, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: pricePerMint.mul(totalBirds),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(`Minted ${totalBirds} kanarias`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Mint 3 gems into each kanaria</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Nest-minting Gem tokens&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let allTx: ContractTransaction[] = [];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (let i = 1; i &lt;= totalBirds; i++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let tx = await gem.nestMint(kanaria.address, 3, i, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: pricePerMint.mul(3),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(`Minted 3 gems into each kanaria`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Accept 3 gems for each kanaria</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Accepting Gems&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (let tokenId = 1; tokenId &lt;= totalBirds; tokenId++) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allTx = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.connect(tokenOwner).acceptChild(tokenId, 2, gem.address, 3 * tokenId),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.connect(tokenOwner).acceptChild(tokenId, 1, gem.address, 3 * tokenId - 1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.connect(tokenOwner).acceptChild(tokenId, 0, gem.address, 3 * tokenId - 2),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(`Accepted gems for each kanaria`);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NOTE: We assign the `tokenOwner` the second available signer, so that the assets are not automatically accepted when added to the token. This happens when an account adding an asset to a token is also the owner of said token.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">In order for the `mintTokens` to be called, we have to add it to the main function:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await mintTokens(kanaria, gem);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Having minted both `Kanarias` and `Gems`, we can now add assets to them. We will add assets to the Kanaria using the `addKanariaAssets` function. It accepts `Kanaria` and address of the `Catalog` smart contract. Assets will be added using the [`addEquippableAssetEntry`](https://github.com/rmrk-team/evm-dev-docs/blob/master/rmrk-legos-examples/broken-reference/README.md) method. We will add a default asset, which doesn&#x27;t need a `baseAddress` value. The composed asset needs to have the baseAddress. We also specify the fixed parts IDs for background, head, body and wings. Additionally we allow the gems to be equipped in the slot parts IDs. With the asset entires added, we can add them to a token and then accept them as well:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function addKanariaAssets(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kanaria: SimpleEquippable,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">baseAddress: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">): Promise&lt;void&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Adding Kanaria assets&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const [ , tokenOwner] = await ethers.getSigners();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const assetDefaultId = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const assetComposedId = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let allTx: ContractTransaction[] = [];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let tx = await kanaria.addEquippableAssetEntry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0, // Only used for assets meant to equip into others</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ethers.constants.AddressZero, // catalog is not needed here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://default.png&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx = await kanaria.addEquippableAssetEntry(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0, // Only used for assets meant to equip into others</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catalogAddress, // Since we&#x27;re using parts, we must define the catalog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ipfs://meta1.json&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [1, 3, 5, 7, 9, 10, 11] // We&#x27;re using first background, head, body and wings and state that this can receive the 3 slot parts for gems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allTx.push(tx);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Wait for both assets to be added</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Added 2 asset entries&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add assets to token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const tokenId = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allTx = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.addAssetToToken(tokenId, assetDefaultId, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    await kanaria.addAssetToToken(tokenId, assetComposedId, 0),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await Promise.all(allTx.map((tx) =&gt; tx.wait()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Added assets to token 1&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Accept both assets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx = await kanaria.connect(tokenOwner).acceptAsset(tokenId, 0, assetDefaultId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx = await kanaria.connect(tokenOwner).acceptAsset(tokenId, 0, assetComposedId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await tx.wait();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&quot;Assets accepted&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/swader/pretrain/docs/rmrk/evm-mergedeq-p2.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/rmrk/evm-mergedeq-p1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">EVM, merged equippable p1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/rmrk/evm-mergedeq-p3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EVM, merged equippable p3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deploy-script" class="table-of-contents__link toc-highlight">Deploy Script</a></li><li><a href="#user-journey" class="table-of-contents__link toc-highlight">User Journey</a></li><li><a href="#training-data" class="table-of-contents__link toc-highlight">Training Data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://openai.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">OpenAI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/bitfalls" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/swader/pretrain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Pretrain by <a href="https://twitter.com/bitfalls">@bitfalls</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.4f41ccfc.js"></script>
<script src="/assets/js/main.9de5c111.js"></script>
</body>
</html>